(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t){},118:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(54),c=a.n(r),o=(a(66),a(1)),m=a(8),i=a(12);function s(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),u=Object(o.a)(s,2),d=u[0],E=u[1],p=Object(n.useState)(null),g=Object(o.a)(p,2),v=g[0],b=g[1];return l.a.createElement("div",{className:"container"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={name:r,password:d};i.post("/login",t).then((function(e){localStorage.setItem("jwtToken",e.data.token),window.location.href="/auction"})).catch((function(e){e.response&&b(e.response.data)}))},style:{marginTop:"100px"}},l.a.createElement("h1",null,"Login"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"u-full-width"},l.a.createElement("label",{htmlFor:"exampleEmailInput"},"Your Name"),l.a.createElement("input",{className:"u-full-width",placeholder:"Mohamed Akbarally",type:"text",value:r,onChange:function(e){return c(e.target.value)},id:"name"}),v&&v.name&&l.a.createElement("p",{style:{color:"Red"}},v.name))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"u-full-width"},l.a.createElement("label",{htmlFor:"exampleEmailInput"},"Your Password"),l.a.createElement("input",{className:"u-full-width",type:"password",value:d,onChange:function(e){return E(e.target.value)},placeholder:"********",id:"password"}),v&&v.password&&l.a.createElement("p",{style:{color:"Red"}},v.password))),l.a.createElement("input",{className:"button-primary",type:"submit",defaultValue:"Submit"})),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(m.b,{to:"/register"},"Register?")))}var u=a(56),d=a.n(u),E=a(57),p=a.n(E),g=[];function v(e){var t=e.socket,a=Object(n.useState)(0),r=Object(o.a)(a,2),c=(r[0],r[1]);return Object(n.useEffect)((function(){t&&(g=[],t.on("log",(function(e){e?(g=g.concat(e),c(g.length)):g=[]})))}),[t]),l.a.createElement("div",null,l.a.createElement("h4",null,"Auction Log"),l.a.createElement("div",{className:"log"},g.map((function(e,t){return l.a.createElement("p",{key:t,style:{marginBottom:0,paddingRight:10}},l.a.createElement("strong",null,e.time," "),e.msg)}))))}function b(e){var t=Object(n.useContext)(O),a=Object(o.a)(t,1)[0];return l.a.createElement("div",null,l.a.createElement("div",null,"Bidders Remaining: ",function(e){for(var t=0,a=0;a<e.length;a++)1==e[a][1]&&t++;return t}(a)))}function f(e){var t=e.socket,a=Object(n.useState)(null),r=Object(o.a)(a,2),c=r[0],m=r[1];return Object(n.useEffect)((function(){t&&t.on("auction",(function(e){m(e)}))}),[t]),c&&l.a.createElement("h1",{style:{marginBottom:"-5px"},className:"timer"},c)}function h(e){var t=e.socket,a=Object(n.useContext)(O),r=Object(o.a)(a,2),c=r[0],m=r[1];return Object(n.useEffect)((function(){t&&(t.on("bidder",(function(e){Object.keys(e).forEach((function(t){return void 0===e[t]?delete e[t]:{}})),m(Object.entries(e))})),t.emit("bidder"))}),[t]),l.a.createElement("div",null,l.a.createElement("div",{className:"row",style:{marginTop:20}},l.a.createElement("h6",null,c.length>1&&l.a.createElement("span",null,"Bidding:"))),l.a.createElement("div",{className:"row",style:{marginTop:-5}},c.map((function(t,a){var n;if(t[0]!=e.name)return t[1]?n="#33C3F0":"#ededed",l.a.createElement("div",{className:"circle tooltip",style:{backgroundColor:n},key:a},l.a.createElement("span",{className:"initials"},t[0].substring(0,2).toUpperCase()),l.a.createElement("span",{className:"tooltiptext"},t))}))))}var N=null,O=Object(n.createContext)(),y=!1;function w(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1],m=Object(n.useState)({Status:null,"Lot Number":null}),i=Object(o.a)(m,2),s=i[0],u=i[1],E=Object(n.useState)([]),g=Object(o.a)(E,2),w=g[0],S=g[1],j=function(e){switch(e.keyCode){case 13:c(!0)}},k=function(e){switch(e.keyCode){case 13:c(!1)}};Object(n.useEffect)((function(){return(N=d()("https://tea-auction-demo.herokuapp.com",{query:{token:localStorage.jwtToken}})).on("error",(function(t){console.log(t),console.log("tellllloo"),window.location.href="/login",e.onLogout()})),N.on("lot",(function(e){u(e)})),N.on("rbidding",(function(e){y=e})),document.addEventListener("keydown",j),document.addEventListener("keyup",k),function(){N.disconnect(),document.removeEventListener("keydown",j),document.removeEventListener("keyup",k)}}),[e.user]),Object(n.useEffect)((function(){"BIDDING_B"===s.Status&&!1===r&&N.emit("bidding",!1),"WAITING"===s.Status&&(!0===r&&N.emit("bidding",!0),!1===r&&N.emit("bidding",!1))}),[r]);var L,x=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("div",{className:"lds-ring"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)))),I=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("p",null,s["Lot Number"]&&l.a.createElement("span",null,"Waiting for Lot #",s["Lot Number"]," to Start at Rs."," ",s["Starting Price"])),l.a.createElement(f,{socket:N}),l.a.createElement("p",null,"Seconds"),y?l.a.createElement("span",null," You are Bidding in this Lot"):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"inline"},l.a.createElement("span",null,"Press")),l.a.createElement("div",{className:"key"},l.a.createElement("span",null,"Enter \u23ce")),l.a.createElement("div",{className:"inline"},l.a.createElement("span",null," to Bid in Lot"))))),T=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("h3",{style:{marginBottom:"0px",fontWeight:700}},"LOT #",s["Lot Number"]&&s["Lot Number"]," IN PROGRESS"),"You are not Participating in this Lot")),B=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("h3",{style:{marginBottom:"0px",fontWeight:700}},"YOU WON LOT #",s["Lot Number"]&&s["Lot Number"]," AT RS."," ",s.Price),"The next lot will start shortly")),D=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("h3",{style:{marginBottom:"0px",fontWeight:700}},"LOT #",s["Lot Number"]&&s["Lot Number"]," NOT SOLD"),"The next lot will start shortly")),C=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("h3",{style:{marginBottom:"0px",fontWeight:700}},"AUCTION IS OVER"))),F=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("h3",{style:{marginBottom:"0px",fontWeight:700}},"YOU WITHDREW FROM LOT #",s["Lot Number"]&&s["Lot Number"]),"The next lot will start shortly")),R=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("p",null,s["Lot Number"]&&l.a.createElement(b,{socket:N})),l.a.createElement(f,{socket:N}),l.a.createElement("p",null,"Rupees"),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"inline"},l.a.createElement("span",null,"Release")),l.a.createElement("div",{className:"key2"},l.a.createElement("span",{className:"pressed"},"Enter \u23ce")),l.a.createElement("div",{className:"inline"},l.a.createElement("span",null," to Withdraw from Lot")))));switch(s.Status){case"WAITING":L=I;break;case"SITOUT":L=T;break;case"BIDDING_W":L=B;break;case"BIDDING_L":L=F;break;case"BIDDING_B":L=R;break;case"NOTSOLD":L=D;break;case"DONE":L=C;break;default:L=x}return l.a.createElement(O.Provider,{value:[w,S]},l.a.createElement("div",null,l.a.createElement("div",{className:"container",style:{marginTop:"20px",marginBottom:"-40px"}},l.a.createElement("div",{className:"row",style:{marginBottom:"-40px"}},l.a.createElement("div",{className:"eight columns"}," ",l.a.createElement("h3",null,"Welcome, ",e.user.name)),l.a.createElement("div",{className:"four columns"}," ",l.a.createElement("button",{onClick:e.onLogout,className:"button-primary u-pull-right"},"Log Out")))),l.a.createElement("hr",{style:{width:"100vw",left:0}}),l.a.createElement("div",{className:"container",style:{marginTop:"30px",minHeight:"100%"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"eight columns"},l.a.createElement("div",{className:p()("main",{active:y&&"WAITING"===s.Status||"BIDDING_B"===s.Status||"BIDDING_W"===s.Status,failed:"BIDDING_L"===s.Status})},L)),l.a.createElement("div",{className:"four columns"},l.a.createElement(v,{socket:N}))),l.a.createElement(h,{socket:N,name:e.user.name}))))}var S=a(12);function j(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),s=Object(o.a)(i,2),u=s[0],d=s[1],E=Object(n.useState)(null),p=Object(o.a)(E,2),g=p[0],v=p[1];return l.a.createElement("div",{className:"container"},l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log(r);var a={name:r,password:u};S.post("/register",a).then((function(t){console.log(t.data),e.history.push("/login")})).catch((function(e){e.response&&v(e.response.data)}))},style:{marginTop:"100px"}},l.a.createElement("h1",null,"Register"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"u-full-width"},l.a.createElement("label",{htmlFor:"exampleEmailInput"},"Your Name"),l.a.createElement("input",{className:"u-full-width",placeholder:"Mohamed Akbarally",type:"text",value:r,onChange:function(e){return c(e.target.value)},id:"name"}),g&&g.name&&l.a.createElement("p",{style:{color:"Red"}},g.name))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"u-full-width"},l.a.createElement("label",{htmlFor:"exampleEmailInput"},"Your Password"),l.a.createElement("input",{className:"u-full-width",type:"password",value:u,onChange:function(e){return d(e.target.value)},placeholder:"********",id:"password"}),g&&g.password&&l.a.createElement("p",{style:{color:"Red"}},g.password))),l.a.createElement("input",{className:"button-primary",type:"submit",defaultValue:"Submit"})),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(m.b,{to:"/login"},"Log in?")))}var k=a(58),L=a.n(k);function x(){return l.a.createElement("div",{className:"footer"},l.a.createElement("img",{alt:"logo",src:L.a,height:"30",className:"logo"}),l.a.createElement("h5",{className:"footertext"},"TEA AUCTION DEMO V1"))}var I=a(12);function T(){var e=Object(n.useState)(10),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(1),m=Object(o.a)(c,2),i=m[0],s=m[1];return l.a.createElement("div",{className:"container",style:{marginTop:"100px",padding:"30px",backgroundColor:"#fff",borderStyle:"solid",borderColor:"#eee"}},l.a.createElement("h2",null,"Server"),l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={time:a,speed:i};I.post("/startserver",t).then((function(e){alert("done")}))}},l.a.createElement("label",{htmlFor:"time"},"Starting Time:"),l.a.createElement("input",{type:"number",id:"fname",name:"time",value:a,onChange:function(e){return r(e.target.value)}}),l.a.createElement("br",null),l.a.createElement("label",{htmlFor:"speed"},"Speed:"),l.a.createElement("input",{type:"number",id:"lname",name:"speed",value:i,onChange:function(e){return s(e.target.value)}}),l.a.createElement("br",null),l.a.createElement("label",{htmlFor:"speed"},"Edit Lots:"),l.a.createElement("a",{href:"https://docs.google.com/spreadsheets/d/193Zi154TVgeRiP6PWJM22AUhOGsBNEp0WS0pcSpgb4M/edit?usp=sharing",target:"_blank"},"Open Spread Sheet"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{type:"submit"},"Start Server")))}a(118);var B=a(2),D=a(60),C=function(e){var t=e.component,a=e.handleLogout,n=e.isAuthenticated,r=Object(D.a)(e,["component","handleLogout","isAuthenticated"]);return l.a.createElement(B.b,Object.assign({},r,{render:function(e){return!0===n?l.a.createElement(t,Object.assign({},e,{handleLogout:a})):l.a.createElement(B.a,{to:"/login"})}}))},F=a(59),R=(a(12),function(){A=!1,G=null,localStorage.removeItem("jwtToken"),window.location.href="/login"});if(localStorage.jwtToken)try{var W=Object(F.a)(localStorage.jwtToken),A=!0,G=W,P=Date.now()/1e3;W.exp<P&&R()}catch(_){R()}var Y=function(){var e=Object(n.useState)(G),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(A),i=Object(o.a)(c,2),u=i[0],d=i[1],E=function(){r(null),d(null),localStorage.removeItem("jwtToken"),window.location.href="/login"};return l.a.createElement(m.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(B.d,null,l.a.createElement(C,{exact:!0,path:"/auction",isAuthenticated:u,component:function(){return l.a.createElement(w,{user:a,onLogout:E})}}),l.a.createElement(B.b,{exact:!0,path:"/login",component:s}),l.a.createElement(B.b,{exact:!0,path:"/",component:s}),l.a.createElement(B.b,{exact:!0,path:"/register",component:j}),l.a.createElement(B.b,{exact:!0,path:"/server",component:T})),l.a.createElement(x,null)))};c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(Y,null)),document.getElementById("root"))},58:function(e,t,a){e.exports=a.p+"static/media/logo-grey.2554ee59.png"},61:function(e,t,a){e.exports=a(119)},66:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.451da08c.chunk.js.map