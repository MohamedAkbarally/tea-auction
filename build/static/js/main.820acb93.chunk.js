(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t){},118:function(e,t,a){},119:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(54),c=a.n(r),o=(a(66),a(1)),m=a(8),i=a(18);function s(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),u=Object(o.a)(s,2),E=u[0],d=u[1],p=Object(n.useState)(null),g=Object(o.a)(p,2),v=g[0],b=g[1];return l.a.createElement("div",{className:"container"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(r);var t={name:r,password:E};i.post("/login",t).then((function(e){localStorage.setItem("jwtToken",e.data.token),window.location.href="/auction"})).catch((function(e){e.response&&b(e.response.data)}))},style:{marginTop:"25%"}},l.a.createElement("h1",null,"Login"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"u-full-width"},l.a.createElement("label",{htmlFor:"exampleEmailInput"},"Your Name"),l.a.createElement("input",{className:"u-full-width",placeholder:"Mohamed Akbarally",type:"text",value:r,onChange:function(e){return c(e.target.value)},id:"name"}),v&&v.name&&l.a.createElement("p",{style:{color:"Red"}},v.name))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"u-full-width"},l.a.createElement("label",{htmlFor:"exampleEmailInput"},"Your Password"),l.a.createElement("input",{className:"u-full-width",type:"password",value:E,onChange:function(e){return d(e.target.value)},placeholder:"********",id:"password"}),v&&v.password&&l.a.createElement("p",{style:{color:"Red"}},v.password))),l.a.createElement("input",{className:"button-primary",type:"submit",defaultValue:"Submit"})),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(m.b,{to:"/register"},"Register?")))}var u=a(56),E=a.n(u),d=a(57),p=a.n(d),g=[];function v(e){var t=e.socket,a=Object(n.useState)(0),r=Object(o.a)(a,2),c=(r[0],r[1]);return Object(n.useEffect)((function(){t&&(g=[],t.on("log",(function(e){e?(g=g.concat(e),c(g.length)):g=[]})))}),[t]),l.a.createElement("div",null,l.a.createElement("h4",null,"Auction Log"),l.a.createElement("div",{className:"log"},g.map((function(e,t){return l.a.createElement("p",{key:t,style:{marginBottom:0,paddingRight:10}},l.a.createElement("strong",null,e.time," "),e.msg)}))))}function b(e){var t=e.socket,a=Object(n.useState)(null),r=Object(o.a)(a,2),c=r[0],m=r[1];return Object(n.useEffect)((function(){t&&(t.on("participants",(function(e){m(e),console.log(e)})),t.emit("participants","get"))}),[t]),l.a.createElement("div",null,c&&l.a.createElement("div",null,"Bidders Remaining: ",c))}function f(e){var t=e.socket,a=Object(n.useState)(null),r=Object(o.a)(a,2),c=r[0],m=r[1];return Object(n.useEffect)((function(){t&&t.on("auction",(function(e){m(e)}))}),[t]),c&&l.a.createElement("h1",{style:{marginBottom:"-5px"},className:"timer"},c)}var h=null;function N(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),r=a[0],c=a[1],m=Object(n.useState)({Status:null,"Lot Number":null}),i=Object(o.a)(m,2),s=i[0],u=i[1],d=function(e){switch(e.keyCode){case 13:c(!0)}},g=function(e){switch(e.keyCode){case 13:c(!1)}};Object(n.useEffect)((function(){return(h=E()("https://tea-auction-demo.herokuapp.com",{query:{token:localStorage.jwtToken}})).on("error",(function(t){console.log(t),window.location.href="/login",e.onLogout()})),h.on("lot",(function(e){u(e)})),document.addEventListener("keydown",d),document.addEventListener("keyup",g),function(){h.disconnect(),document.removeEventListener("keydown",d),document.removeEventListener("keyup",g)}}),[]),Object(n.useEffect)((function(){"BIDDING_B"===s.Status&&!1===r&&h.emit("bidding",!1),"WAITING"===s.Status&&(!0===r&&h.emit("bidding",!0),!1===r&&h.emit("bidding",!1))}),[r]);var N,O=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("div",{className:"lds-ring"},l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)))),w=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("p",null,s["Lot Number"]&&l.a.createElement("span",null,"Waiting for Lot #",s["Lot Number"]," to Start")),l.a.createElement(f,{socket:h}),l.a.createElement("p",null,"Seconds"),r?l.a.createElement("span",null," You are Bidding in this Lot"):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"inline"},l.a.createElement("span",null,"Press")),l.a.createElement("div",{className:"key"},l.a.createElement("span",null,"Enter \u23ce")),l.a.createElement("div",{className:"inline"},l.a.createElement("span",null," to Bid in Lot"))))),y=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("h3",{style:{marginBottom:"0px",fontWeight:700}},"LOT #",s["Lot Number"]&&s["Lot Number"]," IN PROGRESS"),"You are not Participating in this Lot")),S=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("h3",{style:{marginBottom:"0px",fontWeight:700}},"YOU WON LOT #",s["Lot Number"]&&s["Lot Number"]," AT RS."," ",s.Price),"The next lot will start shortly")),j=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("h3",{style:{marginBottom:"0px",fontWeight:700}},"LOT #",s["Lot Number"]&&s["Lot Number"]," NOT SOLD"),"The next lot will start shortly")),L=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("h3",{style:{marginBottom:"0px",fontWeight:700}},"AUCTION IS OVER"))),k=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("h3",{style:{marginBottom:"0px",fontWeight:700}},"YOU WITHDREW FROM LOT #",s["Lot Number"]&&s["Lot Number"]),"The next lot will start shortly")),I=l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"vertical-center"},l.a.createElement("p",null,s["Lot Number"]&&l.a.createElement(b,{socket:h})),l.a.createElement(f,{socket:h}),l.a.createElement("p",null,"Rupees"),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"inline"},l.a.createElement("span",null,"Release")),l.a.createElement("div",{className:"key2"},l.a.createElement("span",{className:"pressed"},"Enter \u23ce")),l.a.createElement("div",{className:"inline"},l.a.createElement("span",null," to Withdraw from Lot")))));switch(s.Status){case"WAITING":N=w;break;case"SITOUT":N=y;break;case"BIDDING_W":N=S;break;case"BIDDING_L":N=k;break;case"BIDDING_B":N=I;break;case"NOTSOLD":N=j;break;case"DONE":N=L;break;default:N=O}return l.a.createElement("div",null,l.a.createElement("div",{className:"container",style:{marginTop:"20px",marginBottom:"-40px"}},l.a.createElement("div",{className:"row",style:{marginBottom:"-40px"}},l.a.createElement("div",{className:"eight columns"}," ",l.a.createElement("h3",null,"Welcome, ",e.user.name)),l.a.createElement("div",{className:"four columns"}," ",l.a.createElement("button",{onClick:e.onLogout,className:"button-primary u-pull-right"},"Log Out")))),l.a.createElement("hr",{style:{width:"100vw",left:0}}),l.a.createElement("div",{className:"container",style:{marginTop:"30px",minHeight:"100%"}},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"eight columns"},l.a.createElement("div",{className:p()("main",{active:r&&"WAITING"===s.Status||"BIDDING_B"===s.Status||"BIDDING_W"===s.Status,failed:"BIDDING_L"===s.Status})},N)),l.a.createElement("div",{className:"four columns"},l.a.createElement(v,{socket:h})))))}var O=a(18);function w(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),s=Object(o.a)(i,2),u=s[0],E=s[1],d=Object(n.useState)(null),p=Object(o.a)(d,2),g=p[0],v=p[1];return l.a.createElement("div",{className:"container"},l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log(r);var a={name:r,password:u};O.post("/register",a).then((function(t){console.log(t.data),e.history.push("/login")})).catch((function(e){e.response&&v(e.response.data)}))},style:{marginTop:"25%"}},l.a.createElement("h1",null,"Register"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"u-full-width"},l.a.createElement("label",{htmlFor:"exampleEmailInput"},"Your Name"),l.a.createElement("input",{className:"u-full-width",placeholder:"Mohamed Akbarally",type:"text",value:r,onChange:function(e){return c(e.target.value)},id:"name"}),g&&g.name&&l.a.createElement("p",{style:{color:"Red"}},g.name))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"u-full-width"},l.a.createElement("label",{htmlFor:"exampleEmailInput"},"Your Password"),l.a.createElement("input",{className:"u-full-width",type:"password",value:u,onChange:function(e){return E(e.target.value)},placeholder:"********",id:"password"}),g&&g.password&&l.a.createElement("p",{style:{color:"Red"}},g.password))),l.a.createElement("input",{className:"button-primary",type:"submit",defaultValue:"Submit"})),l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(m.b,{to:"/login"},"Log in?")))}var y=a(58),S=a.n(y);function j(){return l.a.createElement("div",{className:"footer"},l.a.createElement("img",{alt:"logo",src:S.a,height:"40",className:"logo"}),l.a.createElement("h5",{className:"footertext"},"TEA AUCTION DEMO V1"))}var L=a(18);function k(){var e=Object(n.useState)(10),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(1),m=Object(o.a)(c,2),i=m[0],s=m[1];return l.a.createElement("div",{className:"container",style:{marginTop:"100px",padding:"30px",backgroundColor:"#fff",borderStyle:"solid",borderColor:"#eee"}},l.a.createElement("h2",null,"Server"),l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={time:a,speed:i};L.post("/startserver",t).then((function(e){alert("done")}))}},l.a.createElement("label",{htmlFor:"time"},"Starting Time:"),l.a.createElement("input",{type:"number",id:"fname",name:"time",value:a,onChange:function(e){return r(e.target.value)}}),l.a.createElement("br",null),l.a.createElement("label",{htmlFor:"speed"},"Speed:"),l.a.createElement("input",{type:"number",id:"lname",name:"speed",value:i,onChange:function(e){return s(e.target.value)}}),l.a.createElement("br",null),l.a.createElement("label",{htmlFor:"speed"},"Excel File:"),l.a.createElement("input",{type:"file",id:"myFile",name:"myFile",accept:".csv"}),l.a.createElement("br",null),"if no file is chosen defualt template will be used",l.a.createElement("br",null),l.a.createElement("a",{href:"../auction.csv",download:"auction.csv"},"Download Template?"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{type:"submit"},"Start Server")))}a(118);var I=a(2),x=a(60),T=function(e){var t=e.component,a=e.handleLogout,n=e.isAuthenticated,r=Object(x.a)(e,["component","handleLogout","isAuthenticated"]);return l.a.createElement(I.b,Object.assign({},r,{render:function(e){return!0===n?l.a.createElement(t,Object.assign({},e,{handleLogout:a})):l.a.createElement(I.a,{to:"/login"})}}))},D=a(59),B=function(){A=!1,R=null,localStorage.removeItem("jwtToken"),window.location.href="/login"};if(localStorage.jwtToken)try{var F=Object(D.a)(localStorage.jwtToken),A=!0,R=F;console.log(R);var W=Date.now()/1e3;F.exp<W&&B()}catch(G){B()}var C=function(){var e=Object(n.useState)(R),t=Object(o.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(A),i=Object(o.a)(c,2),u=i[0],E=i[1],d=function(){r(null),E(null),localStorage.removeItem("jwtToken"),window.location.href="/login"};return l.a.createElement(m.a,null,l.a.createElement("div",{className:"App"},l.a.createElement(I.d,null,l.a.createElement(T,{exact:!0,path:"/auction",isAuthenticated:u,component:function(){return l.a.createElement(N,{user:a,onLogout:d})}}),l.a.createElement(I.b,{exact:!0,path:"/login",component:s}),l.a.createElement(I.b,{exact:!0,path:"/",component:s}),l.a.createElement(I.b,{exact:!0,path:"/register",component:w}),l.a.createElement(I.b,{exact:!0,path:"/server",component:k})),l.a.createElement(j,null)))};c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(C,null)),document.getElementById("root"))},58:function(e,t,a){e.exports=a.p+"static/media/logo-grey.2554ee59.png"},61:function(e,t,a){e.exports=a(119)},66:function(e,t,a){}},[[61,1,2]]]);
//# sourceMappingURL=main.820acb93.chunk.js.map